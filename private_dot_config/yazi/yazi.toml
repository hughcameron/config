[preview]
# Fallback dimensions for SSH where ioctl pixel detection fails
max_width  = 1920
max_height = 1200
image_filter = "lanczos3"

[opener]
helix = [
    { run = 'hx "$@"', block = true, for = "unix" },
    { run = 'hx %*',    block = true, for = "windows" }
]

[open]
prepend_rules = [
    { mime = "text/*", use = "helix" },
    { mime = "*", use = "helix" },
]

[plugin]
prepend_fetchers = [
  { id = "git", url = "*",  run = "git" },
  { id = "git", url = "*/", run = "git" },
]

prepend_previewers = [
  { url = "/tmp/yazi-gcs/**", run = "gcs-browser" },
  { url = "*.md",      run = 'piper -- CLICOLOR_FORCE=1 glow -w=$w -s=$HOME/.config/glow/onedark.json "$1"' },
  { url = "*.csv",     run = "duckdb" },
  { url = "*.tsv",     run = "duckdb" },
  { url = "*.json",    run = "duckdb" },
  { url = "*.parquet", run = "duckdb" },
  { url = "*.xlsx",    run = "duckdb" },
  { url = "*.db",      run = "duckdb" },
  { url = "*.duckdb",  run = "duckdb" },
]

prepend_preloaders = [
  { url = "*.csv",     run = "duckdb", multi = false },
  { url = "*.tsv",     run = "duckdb", multi = false },
  { url = "*.json",    run = "duckdb", multi = false },
  { url = "*.parquet", run = "duckdb", multi = false },
  { url = "*.xlsx",    run = "duckdb", multi = false },
]
